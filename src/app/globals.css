@tailwind base;

/* Keep your custom dark variant for scoping */
@custom-variant dark (&:is(.dark *));
@tailwind components;
@tailwind utilities;

/* =========================
   BASE TOKENS & THEME PALETTE
   ========================= */
@layer base {
  :root {
    /* shadcn primitives (kept) */
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --radius: 0.5rem;

    /* smooth theme transitions */
    --theme-transition: 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);

    /* NEW: app-wide palette (Light = Blue) */
    --theme-primary: #3b82f6;
    --theme-primary-hover: #2563eb;
    --theme-bg: #ffffff;
    --theme-surface: #f8fafc;
    --theme-text: #000000;
    --theme-text-muted: #64748b;
    --theme-border-strong: #e5e7eb;
    --theme-accent: #3b82f6;
  }

  .dark {
    /* shadcn dark primitives (kept) */
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;

    /* NEW: app palette (Dark = Pink) */
    --theme-primary: #a90068;
    --theme-primary-hover: #8a0055;
    --theme-bg: #0f0f23;
    --theme-surface: #1a1a2e;
    --theme-text: #ffffff;
    --theme-text-muted: #94a3b8;
    --theme-border-strong: #374151;
    --theme-accent: #a90068;
  }
}

/* =========================
   GLOBAL RESET & ACCESSIBILITY
   ========================= */
@layer base {
  * {
    @apply border-border;
    box-sizing: border-box;
  }

  html, body {
    overflow-x: hidden;
    margin: 0;
    padding: 0;
    height: 100%;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* smooth theme transitions (opt-in via .theme-transition) */
  .theme-transition {
    transition:
      background-color var(--theme-transition),
      color var(--theme-transition),
      border-color var(--theme-transition);
  }

  /* media/content polish */
  video {
    object-fit: cover !important;
    object-position: center center !important;
    image-rendering: auto !important;
  }

  /* prevent iOS zoom on inputs */
  input, select, textarea, button {
    font-size: max(16px, 1rem) !important;
    -webkit-appearance: none;
    appearance: none;
  }

  /* mobile optimizations */
  @media (max-width: 768px) {
    * {
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
    }
    body {
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
    }
  }

  /* high DPI */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    video { image-rendering: -webkit-optimize-contrast !important; }
  }

  /* reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* =========================
   SIDEBAR THEME (kept)
   ========================= */
:root {
  --sidebar: hsl(0 0% 98%);
  --sidebar-foreground: hsl(240 5.3% 26.1%);
  --sidebar-primary: hsl(240 5.9% 10%);
  --sidebar-primary-foreground: hsl(0 0% 98%);
  --sidebar-accent: hsl(240 4.8% 95.9%);
  --sidebar-accent-foreground: hsl(240 5.9% 10%);
  --sidebar-border: hsl(220 13% 91%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}
.dark {
  --sidebar: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

/* Tailwind inline theme map (kept) */
@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/* unify final base (no duplicates) */
@layer base {
  * { @apply border-border outline-ring/50; }
  body { @apply bg-background text-foreground; }
}

/* =========================
   OPTIONAL UTILITIES
   ========================= */
@layer utilities {
  /* 1px glow line using theme primary (use in header borders etc.) */
  .u-glow-line {
    background-image: linear-gradient(to right, transparent, var(--theme-primary), transparent);
    box-shadow: 0 0 10px 2px var(--theme-primary);
  }

  /* convenient gradient class if you prefer utility over arbitrary */
  .u-gradient-primary {
    background-image: linear-gradient(to right, var(--theme-primary), var(--theme-primary));
  }
}
/* ===========================
   Hyperspeed First-Visit Loader
   =========================== */

   html[data-hyperspeed-hide="1"] .hs-loader { display: none !important; }

   .hs-loader {
     position: fixed;
     inset: 0;
     z-index: 999999;
     background: #000; /* guarded background under the effect */
     opacity: 1;
     transition: opacity .8s ease-in-out;
   }
   
   .hs-loader--hide { opacity: 0; pointer-events: none; }
   
   .hs-stage {
     position: absolute;
     inset: 0;
   }
   
   .hs-overlay {
     position: absolute;
     inset: 0;
     display: grid;
     place-items: end center;
     padding-bottom: clamp(24px, 5vh, 64px);
     pointer-events: none;
     background: linear-gradient(to top, rgba(0,0,0,.35), rgba(0,0,0,0) 30%);
   }
   
   .hs-title {
     color: #fff;
     font-weight: 700;
     letter-spacing: .3px;
     font-size: clamp(1rem, 2.4vw, 1.4rem);
     text-shadow: 0 2px 18px rgba(169, 0, 104, .45);
     opacity: .9;
   }
   